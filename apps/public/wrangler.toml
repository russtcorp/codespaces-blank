name = "diner-public"
compatibility_date = "2024-01-01"
pages_build_output_dir = "./build/client"

# Bindings
[[d1_databases]]
binding = "DB"
database_name = "diner-core"
database_id = "67be05e6-6d3d-45f4-bba6-b2b7450c919f"

[[r2_buckets]]
binding = "ASSETS"
bucket_name = "diner-assets"

[[kv_namespaces]]
binding = "KV"
id = "6fdb42f00f674f9b8fbb2dab755f3279"

# Durable Object binding (for Agent coordination)
[[durable_objects]]
binding = "AGENT_DO"
class_name = "DinerAgent"
script_name = "agent-worker"

# Workers AI (for image generation and embeddings)
[ai]
binding = "AI"

# Vectorize (for semantic menu search)
[vectorize]
binding = "VECTORIZE"
index_name = "diner-menu-index"

[observability]
enabled = true

[vars]
CLOUDFLARE_IMAGES_ACCOUNT_HASH = "REPLACE_WITH_CF_IMAGES_HASH"

# WASM module for Resvg (Satori PNG rendering)
[wasm_modules]
resvg = "./node_modules/@resvg/resvg-wasm/index_bg.wasm"
